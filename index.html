<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONNECT-4</title>
    <style>
        *{
            margin:0px;
            padding:0px;
        }
        body{
            width:100vw;
            height:100vh;
            display: grid;
            justify-content: center;
            align-items: center;
        }
        .grid div{
            width:40px;
            height: 40px;
            display: inline-block;
        }
        .player-one{
            background-color: blue;
            border-radius: 50%;
        }
        .player-two{
            background-color: red;
            border-radius: 50%;
        }
        .grid{
            border:4px solid black;
            width:310px;
        }
        .square{
            background-color: lemonchiffon;
        }
        .bed{
            background-color: white;
            position: absolute;
            top:100px;
        }
        /* --- Animations & interaction enhancements --- */
        .square { position: relative; overflow: hidden; cursor: pointer; }

        .player-one, .player-two { 
            animation: drop-in 300ms cubic-bezier(.2,.9,.25,1.2) both;
            box-shadow: inset 0 0 0 2px rgba(255,255,255,0.25);
        }

        .preview-one::after, .preview-two::after {
            content: "";
            position: absolute;
            inset: 4px;
            border-radius: 50%;
            pointer-events: none;
            transform: scale(0.6);
            opacity: 0.5;
            animation: preview-pop 160ms ease-out forwards;
        }
        .preview-one::after { background-color: blue; }
        .preview-two::after { background-color: red; }

        .grid.shake { animation: shake 300ms ease-in-out; }
        .win { animation: pulse-win 900ms ease-in-out infinite; }

        @keyframes drop-in {
            0% { transform: translateY(-120px) scale(0.5); filter: brightness(1.1); }
            70% { transform: translateY(8px) scale(1.03); }
            100% { transform: translateY(0) scale(1); filter: none; }
        }
        @keyframes preview-pop {
            0% { transform: scale(0.6); opacity: 0; }
            100% { transform: scale(1); opacity: 0.5; }
        }
        @keyframes pulse-win {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,0,0.0); }
            50% { transform: scale(1.12); box-shadow: 0 0 0 6px rgba(255,255,0,0.35); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-6px); }
            40% { transform: translateX(6px); }
            60% { transform: translateX(-4px); }
            80% { transform: translateX(4px); }
        }
        /* --- end enhancements --- */
    </style>
</head>
<body>
    <h1>CONNECT FOUR</h1>
    <h2>CURRENT PLAYER:<span class="head"></span></h2>

    <div class="grid">
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square taken bed"></div>
        <div class="square taken bed"></div>
        <div class="square taken bed"></div>
        <div class="square taken bed"></div>
        <div class="square taken bed"></div>
        <div class="square taken bed"></div>
        <div class="square taken bed"></div>
    </div>
    <script>
        let winn = [
    [0, 1, 2, 3],
    [41, 40, 39, 38],
    [7, 8, 9, 10],
    [34, 33, 32, 31],
    [14, 15, 16, 17],
    [27, 26, 25, 24],
    [21, 22, 23, 24],
    [20, 19, 18, 17],
    [28, 29, 30, 31],
    [13, 12, 11, 10],
    [35, 36, 37, 38],
    [6, 5, 4, 3],
    [0, 7, 14, 21],
    [41, 34, 27, 20],
    [1, 8, 15, 22],
    [40, 33, 26, 19],
    [2, 9, 16, 23],
    [39, 32, 25, 18],
    [3, 10, 17, 24],
    [38, 31, 24, 17],
    [4, 11, 18, 25],
    [37, 30, 23, 16],
    [5, 12, 19, 26],
    [36, 29, 22, 15],
    [6, 13, 20, 27],
    [35, 28, 21, 14],
    [0, 8, 16, 24],
    [41, 33, 25, 17],
    [7, 15, 23, 31],
    [34, 26, 18, 10],
    [14, 22, 30, 38],
    [27, 19, 11, 3],
    [35, 29, 23, 17],
    [6, 12, 18, 24],
    [28, 22, 16, 10],
    [13, 19, 25, 31],
    [21, 15, 9, 3],
    [20, 26, 32, 38],
    [36, 30, 24, 18],
    [5, 11, 17, 23],
    [37, 31, 25, 19],
    [4, 10, 16, 22],
    [2, 10, 18, 26],
    [39, 31, 23, 15],
    [1, 9, 17, 25],
    [40, 32, 24, 16],
    [9, 17, 25, 33],
    [8, 16, 24, 32],
    [11, 17, 23, 29],
    [12, 18, 24, 30],
    [1, 2, 3, 4],
    [5, 4, 3, 2],
    [8, 9, 10, 11],
    [12, 11, 10, 9],
    [15, 16, 17, 18],
    [19, 18, 17, 16],
    [22, 23, 24, 25],
    [26, 25, 24, 23],
    [29, 30, 31, 32],
    [33, 32, 31, 30],
    [36, 37, 38, 39],
    [40, 39, 38, 37],
    [7, 14, 21, 28],
    [8, 15, 22, 29],
    [9, 16, 23, 30],
    [10, 17, 24, 31],
    [11, 18, 25, 32],
    [12, 19, 26, 33],
    [13, 20, 27, 34],
  ];
        document.querySelector('.head').innerHTML = "ONE";
function check(){
    for(let i=0;i<winn.length;i++){
        let sqr1 = winn[i][0];
        let sqr2 = winn[i][1];
        let sqr3 = winn[i][2];
        let sqr4 = winn[i][3];

        if(squares[sqr1].classList.contains('player-one')&&squares[sqr2].classList.contains('player-one')&&squares[sqr3].classList.contains('player-one')&&squares[sqr4].classList.contains('player-one')){
            document.querySelector('.head').innerHTML = "PLAYER ONE WINS";
            squares[sqr1].classList.add('win');
            squares[sqr2].classList.add('win');
            squares[sqr3].classList.add('win');
            squares[sqr4].classList.add('win');
            setTimeout(reset,3000);
        }
        
        if(squares[sqr1].classList.contains('player-two')&&squares[sqr2].classList.contains('player-two')&&squares[sqr3].classList.contains('player-two')&&squares[sqr4].classList.contains('player-two')){
            document.querySelector('.head').innerHTML = "PLAYER TWO WINS";
            squares[sqr1].classList.add('win');
            squares[sqr2].classList.add('win');
            squares[sqr3].classList.add('win');
            squares[sqr4].classList.add('win');
            setTimeout(reset,3000);
        }
    }
}
let squares = document.querySelectorAll('.square');
let currentPlayer = 'one';
const grid = document.querySelector('.grid');

function clearPreview(){
    for(let k=0;k<42;k++){
        squares[k].classList.remove('preview-one');
        squares[k].classList.remove('preview-two');
    }
}

function findDropIndex(col){
    for(let r=35+col; r>=col; r-=7){
        if(squares[r+7].classList.contains('taken') && !squares[r].classList.contains('taken')){
            return r;
        }
    }
    return null;
}

for(let i=0;i<42;i++){
    const col = i % 7;
    squares[i].addEventListener('mouseenter', ()=>{
        const target = findDropIndex(col);
        clearPreview();
        if(target !== null){
            squares[target].classList.add(currentPlayer==='one' ? 'preview-one' : 'preview-two');
        }
    });
    squares[i].addEventListener('mouseleave', ()=>{
        clearPreview();
    });
}


    for(let i=0;i<42;i++){
        squares[i].onclick = function(){
            if(squares[i+7].classList.contains('taken')&&!squares[i].classList.contains('taken')){
                if(currentPlayer=='one'){
                    squares[i].classList.add('player-one');
                    squares[i].classList.add('taken');
                    currentPlayer = 'two';
                    document.querySelector('.head').innerHTML = "TWO";
                    squares[i].classList.remove('square');
                    clearPreview();
                }
                else{
                    squares[i].classList.add('player-two');
                    squares[i].classList.add('taken');
                    currentPlayer='one';
                    document.querySelector(".head").innerHTML = "ONE";
                    squares[i].classList.remove('square');
                    clearPreview();
                }
            }
            else{
                document.querySelector('.head').innerHTML = "WRONG MOVE";
                grid.classList.add('shake');
                setTimeout(()=>grid.classList.remove('shake'), 400);
            }
            check();
        }
    }
    function reset(){
        window.location.reload();
    }
    </script>
</body>
</html>